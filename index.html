<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Food Facts Finder | Search Nutrition Facts & Calories Instantly</title>
  <meta name="description" content="Find accurate nutrition facts, calories, and % Daily Values for any food. Instantly get fat, carbs, protein, sugar, sodium, and more â€” perfect for calorie tracking and healthy eating." />
  <meta name="keywords" content="nutrition facts, calories, food database, food calories, fat, carbs, protein, diet tool, food nutrition, calorie counter" />
  <meta name="author" content="Food Facts Finder" />

  <!-- Social Share -->
  <meta property="og:title" content="Food Facts Finder - Search Nutrition Facts Instantly" />
  <meta property="og:description" content="Find calories, fat, protein, sugar, and more â€” your free nutrition label for any food!" />
  <meta property="og:image" content="https://foodfactsfinder.netlify.app/preview.jpg" />
  <meta property="og:url" content="https://foodfactsfinder.netlify.app/" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Structured Data for Google -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Food Facts Finder",
    "url": "https://foodfactsfinder.netlify.app",
    "description": "Instantly search nutrition facts, calories, and % Daily Values for any food item.",
    "publisher": {
      "@type": "Organization",
      "name": "Food Facts Finder"
    }
  }
  </script>

  <!-- Google AdSense (replace with your ID once approved) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-xxxxxxxxxxxx"
     crossorigin="anonymous"></script>

  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: #f5f5f5;
      color: #111;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 8px;
      font-weight: 700;
      text-align: center;
    }
    p {
      color: #555;
      margin-bottom: 25px;
      text-align: center;
      max-width: 500px;
    }
    input {
      width: 100%;
      max-width: 400px;
      padding: 12px 15px;
      border: 1px solid #bbb;
      border-radius: 10px;
      font-size: 1rem;
      margin-bottom: 25px;
      outline: none;
    }
    input:focus { border-color: #000; }

    .nutrition-facts {
      background: #fff;
      border: 2px solid #000;
      width: 100%;
      max-width: 380px;
      padding: 15px 20px;
      display: none;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      animation: fadeIn 0.3s ease-in;
    }
    .nutrition-facts h2 {
      font-size: 1.8rem;
      border-bottom: 10px solid #000;
      padding-bottom: 5px;
      margin-bottom: 10px;
      font-weight: 900;
    }
    .food-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .calories {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 1.8rem;
      font-weight: 900;
      margin: 8px 0;
    }
    .line { border-bottom: 1px solid #000; margin: 6px 0; }
    .thick-line { border-bottom: 5px solid #000; margin: 8px 0; }
    .nutrient {
      display: flex;
      justify-content: space-between;
      font-size: 0.95rem;
      margin: 3px 0;
    }
    .nutrient .dv {
      color: #333;
      font-weight: 500;
      font-size: 0.85rem;
    }
    .bold { font-weight: 700; }
    .footer {
      font-size: 0.75rem;
      color: #333;
      border-top: 6px solid #000;
      padding-top: 5px;
      margin-top: 8px;
      line-height: 1.3;
    }
    .buttons {
      margin-top: 14px;
      display: flex;
      gap: 10px;
    }
    .btn {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: #fff;
      font-size: 0.9rem;
    }
    .btn-copy { background-color: #009578; }
    .btn-share { background-color: #555; }
    .btn:hover { opacity: 0.9; }
    .loading {
      color: #777;
      font-size: 0.9rem;
      margin-top: 10px;
    }
    .ad-container {
      margin: 30px 0;
      width: 100%;
      max-width: 400px;
      text-align: center;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <h1>ðŸ¥— Food Facts Finder</h1>
  <p>Search any food to view, copy, or share its complete nutrition facts and % Daily Values.</p>

  <div class="ad-container">
    <!-- Example AdSense box (active once you add your publisher ID) -->
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-client="ca-pub-xxxxxxxxxxxx"
      data-ad-slot="1234567890"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <input type="text" id="search" placeholder="e.g. fried rice, apple, grilled chicken" />
  <div class="loading" id="loading" style="display:none;">Fetching data...</div>
  <div class="nutrition-facts" id="result"></div>

  <script>
    const searchInput = document.getElementById("search");
    const resultBox = document.getElementById("result");
    const loading = document.getElementById("loading");

    async function fetchNutrition(foodName) {
      const url = `/.netlify/functions/fetchNutrition?query=${encodeURIComponent(foodName)}`;
      try {
        loading.style.display = "block";
        resultBox.style.display = "none";

        const response = await fetch(url);
        const data = await response.json();

        if (data.items && data.items.length > 0) {
          const food = data.items[0];
          showResult(food);
        } else {
          resultBox.innerHTML = "<p>No results found. Try a different food.</p>";
          resultBox.style.display = "block";
        }
      } catch (error) {
        resultBox.innerHTML = "<p>Error fetching data. Please try again.</p>";
        resultBox.style.display = "block";
      } finally {
        loading.style.display = "none";
      }
    }

    function showResult(food) {
      resultBox.style.display = "block";
      const dv = {
        fat: (food.fat_total_g / 78) * 100,
        cholesterol: (food.cholesterol_mg / 300) * 100,
        sodium: (food.sodium_mg / 2300) * 100,
        carbs: (food.carbohydrates_total_g / 275) * 100,
        fiber: (food.fiber_g / 28) * 100,
        protein: (food.protein_g / 50) * 100
      };

      const nutritionText = `
${food.name.toUpperCase()}
Calories: ${food.calories.toFixed(0)} kcal
Total Fat: ${food.fat_total_g.toFixed(1)} g (${dv.fat.toFixed(0)}% DV)
Cholesterol: ${food.cholesterol_mg.toFixed(0)} mg (${dv.cholesterol.toFixed(0)}% DV)
Sodium: ${food.sodium_mg.toFixed(0)} mg (${dv.sodium.toFixed(0)}% DV)
Carbohydrates: ${food.carbohydrates_total_g.toFixed(1)} g (${dv.carbs.toFixed(0)}% DV)
Fiber: ${food.fiber_g.toFixed(1)} g (${dv.fiber.toFixed(0)}% DV)
Sugar: ${food.sugar_g.toFixed(1)} g
Protein: ${food.protein_g.toFixed(1)} g (${dv.protein.toFixed(0)}% DV)
Serving Size: ${food.serving_size_g || 100} g
`;

      resultBox.innerHTML = `
        <h2>Nutrition Facts</h2>
        <div class="food-title">${food.name.toUpperCase()}</div>
        <div class="thick-line"></div>
        <div class="calories"><span>Calories</span><span>${food.calories.toFixed(0)}</span></div>
        <div class="thick-line"></div>

        <div class="nutrient"><span>Total Fat</span><span>${food.fat_total_g.toFixed(1)} g <span class="dv">${dv.fat.toFixed(0)}%</span></span></div>
        <div class="nutrient"><span>Cholesterol</span><span>${food.cholesterol_mg.toFixed(0)} mg <span class="dv">${dv.cholesterol.toFixed(0)}%</span></span></div>
        <div class="nutrient"><span>Sodium</span><span>${food.sodium_mg.toFixed(0)} mg <span class="dv">${dv.sodium.toFixed(0)}%</span></span></div>
        <div class="nutrient"><span>Total Carbohydrates</span><span>${food.carbohydrates_total_g.toFixed(1)} g <span class="dv">${dv.carbs.toFixed(0)}%</span></span></div>
        <div class="nutrient"><span>Dietary Fiber</span><span>${food.fiber_g.toFixed(1)} g <span class="dv">${dv.fiber.toFixed(0)}%</span></span></div>
        <div class="nutrient"><span>Total Sugars</span><span>${food.sugar_g.toFixed(1)} g</span></div>
        <div class="nutrient"><span>Protein</span><span>${food.protein_g.toFixed(1)} g <span class="dv">${dv.protein.toFixed(0)}%</span></span></div>

        <div class="footer">
          *Serving size: ${food.serving_size_g ? food.serving_size_g + " g" : "100 g"}<br>
          *Percent Daily Values (%DV) are based on a 2,000 calorie diet.
        </div>

        <div class="buttons">
          <button id="copyBtn" class="btn btn-copy">ðŸ“‹ Copy Nutrition</button>
          <button id="shareBtn" class="btn btn-share">ðŸ”— Share</button>
        </div>
      `;

      document.getElementById("copyBtn").onclick = () => {
        navigator.clipboard.writeText(nutritionText);
        alert("Nutrition facts copied! You can paste them into Lose It or anywhere else.");
      };

      document.getElementById("shareBtn").onclick = async () => {
        const shareData = { title: "Food Facts Finder", text: nutritionText, url: window.location.href };
        if (navigator.share) await navigator.share(shareData);
        else alert("Sharing not supported on this device. You can copy instead.");
      };
    }

    let typingTimer;
    searchInput.addEventListener("input", () => {
      clearTimeout(typingTimer);
      const query = searchInput.value.trim();
      if (query.length > 2) typingTimer = setTimeout(() => fetchNutrition(query), 600);
    });
  </script>
</body>
</html>
